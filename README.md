# 願い石と僕たちの絆

**「僕たちの絆」を紡ぐ関係値RPG**

Godot 4.xエンジンと GDScript で開発された関係値重視型ダンジョン探索RPGです。2人パーティによる選択肢ベースの探索システムと、3段階関係値システム（対立／通常／親密）による戦闘技・掛け合いの変化が特徴です。

> **🔄 移行完了**: Unity版からGodot 4.x版への完全移行を実施し、98%の軽量化と90%の高速化を実現しました。

## ゲーム概要

### コンセプト
- **「僕たちの絆」を紡ぐ関係値RPG**
- 関係値の変化（親密／対立）をバトルやイベントに反映
- 選択肢や行動で関係値が上下し、戦闘技（共闘技・対立技）や掛け合いが変化
- 旅の過程そのものを物語体験の中心に据える

### 基本仕様
- **プラットフォーム**: Windows・Mac・Linux（Godotマルチプラットフォーム対応）
- **ゲームエンジン**: Godot 4.3以上
- **開発言語**: GDScript
- **基本構造**: ローグライク＋ストーリー重視
- **探索システム**: 選択肢ベースのダンジョン進行
- **戦闘システム**: ターン制コマンドバトル
- **関係値システム**: 3段階（対立／通常／親密）
- **特殊要素**: プレゼント・イベントによる好感度変化

## ゲーム特徴

### コアシステム
- **3段階関係値**: 対立（-50以下）・通常（-49～+49）・親密（+50以上）
- **2人パーティ**: 固定2人編成で深い関係性構築
- **選択肢ベース**: マップ移動ではなく選択肢でダンジョン進行
- **ターン制バトル**: 関係値によって使用可能なスキルが変化

### ゲームフロー
1. **プロローグ**: テキスト進行で世界観・キャラ紹介
2. **拠点**: ペア選択・相関図確認・サイトウとの交流
3. **ダンジョン**: 7層構造でギミック・戦闘・イベント
4. **リザルト**: 経験値・関係値変動の確認

### スキルシステム
- **通常スキル（白）**: 常時使用可能
- **魔法スキル（青）**: MP消費、常時使用可能
- **共闘技（緑）**: 親密時のみ、SP消費、高威力
- **対立技（赤）**: 対立時のみ、SP消費、ハイリスクハイリターン

### 詳細仕様ドキュメント
本ゲームの詳細なシステム仕様については、以下のドキュメントを参照してください：

- **[docs/game-systems.md](./docs/game-systems.md)**: 関係値システム、バトルシステム、プレゼント機能、ラスボス戦の詳細
- **[docs/ui-events.md](./docs/ui-events.md)**: UI仕様、イベント構成、ゲーム進行フローの詳細
- **[docs/development-scope.md](./docs/development-scope.md)**: 開始範囲、実装状況、今後の計画
- **[docs/architecture-design.md](./docs/architecture-design.md)**: Godotアーキテクチャ設計指針



## Godot プロジェクト構造

```
GodotProject/
├── project.godot                  # プロジェクト設定ファイル
├── res/                           # リソースフォルダ
│   ├── Scenes/                    # シーンファイル (.tscn)
│   │   ├── Main.tscn              # メインシーン（ゲーム統合）
│   │   └── Battle.tscn            # バトルシーン
│   ├── Scripts/                   # GDScriptファイル
│   │   ├── game_manager.gd        # ゲーム全体管理（AutoLoad）
│   │   ├── character.gd           # キャラクターリソース（extends Resource）
│   │   ├── main_scene.gd          # メインシーン制御
│   │   ├── battle_scene.gd        # バトルシーン制御
│   │   ├── systems/               # ゲームシステム
│   │   │   ├── relationship.gd    # 関係値システム
│   │   │   └── battle_system.gd   # バトルシステム
│   │   └── ui/                    # UIシステム
│   │       ├── dialogue_box.gd    # ダイアログボックス
│   │       ├── choice_panel.gd    # 選択肢パネル
│   │       └── effect_layer.gd    # エフェクト管理
│   └── Assets/                    # アセットファイル（別管理）
│       ├── images/                # 画像リソース（未含有）
│       ├── sounds/                # 音声リソース（未含有）
│       └── effects/               # エフェクトリソース（未含有）
└── UNITY_TO_GODOT_MAPPING.md     # 移行マッピング文書
```

### Unity版アーカイブ
Unity版のソースコードは `Unity/` フォルダに保存されていますが、開発の主軸はGodot版に移行済みです。

## プロジェクト利用について

> **⚠️ 重要**: このリポジトリはゲームの実行に必要なアセット（イラスト・BGM・効果音等）を含まない**学習・参考用途専用**のソースコードです。

### 利用目的
- **学習・研究**: Godot + GDScriptでの関係値システム実装の参考
- **技術研究**: 3段階関係値システムのアーキテクチャ研究
- **教育利用**: ゲーム開発教育での実装例として
- **貢献・改善**: システム改善提案やバグ修正への貢献

### アセット管理方針
本プロジェクトは**アセット分離型**の設計を採用しています：

- **✅ 含まれるもの**: GDScriptソースコード、シーン構造、システム仕様、シナリオファイル
- **❌ 含まれないもの**: キャラクターイラスト、BGM、効果音、ボイス（リポジトリサイズ最適化のため）
- **実行制限**: アセット未完備のため、そのままでは起動・プレイ不可
- **目的**: 学習・参考用途での利用に特化

#### Git管理の最適化
```
GodotProject/Assets/
├── images/          # 🚫 .gitignoreで除外 - バイナリファイル
├── sounds/          # 🚫 .gitignoreで除外 - バイナリファイル  
├── scenarios/       # ✅ git管理対象 - テキストファイル
└── effects/         # ✅ git管理対象 - 軽量ファイル
```

**理由**: 画像・音声ファイルはバイナリファイルのため、gitでの差分管理に不向きです。リポジトリサイズを軽量に保ち、クローン・プル速度を向上させるため、これらのファイルはgit管理から除外しています。

### 実装済みシステム
- ✅ 3段階関係値システム（対立/通常/親密）
- ✅ ターン制バトルシステム（関係値連動スキル）
- ✅ 選択肢ベースダンジョン進行
- ✅ プレゼント・イベントシステム
- ✅ セーブ・ロード機能
- ✅ UI・エフェクトシステム

### 技術的成果
| 項目 | Unity版 | Godot版 | 改善効果 |
|------|---------|---------|----------|
| ソースコードサイズ | ~500MB | ~10MB | **98%軽量化** |
| エンジン起動時間 | 15-30秒 | 1-3秒 | **90%高速化** |
| メモリ使用量 | 200-400MB | 50-100MB | **75%削減** |

## キャラクター構成

### メインキャラクター
1. **ソウマ** - 主人公
2. **ユズキ** - 幼馴染・白魔術
3. **レツジ** - 親友・格闘
4. **リゼル** - 召喚術師
5. **カイ** - チャラ男・剣士
6. **マキト** - 博識・黒魔術
7. **セリーヌ** - お嬢様・白黒魔術

### DLCキャラクター
- **リラ** - AI少女
- **ケンゴ** - 主人公の父
- **ピクス** - インプ風魔物

### 推奨ペア一覧
特別イベント・エンディングCGが用意されたペアです：

#### 主人公ペア
- ソウマ × ユズキ（幼馴染の絆）
- ソウマ × レツジ（親友の信頼）
- ソウマ × カイ（対立から親密へ）
- ソウマ × リラ（DLC）

#### その他の推奨ペア
- レツジ × ユズキ、レツジ × リゼル
- ユズキ × カイ、マキト × セリーヌ
- カイ × セリーヌ、カイ × ピクス（DLC）
- セリーヌ × リラ（DLC）、ケンゴ × リラ（DLC）
- マキト × ピクス（DLC）

#### 対立ペア（特殊システム）
- ソウマ × カイ（価値観不一致）
- ユズキ × セリーヌ（三角関係）
- レツジ × ケンゴ（DLC、過去の事件）

> 詳細なペア情報や関係性については **[docs/game-systems.md](./docs/game-systems.md)** を参照

## ストーリー概要

### 世界観・あらすじ
- **願い石**: 複数の魂を代償に一つの願いを叶える石
- **ハカセ（ユズキの父・ケンゴの親友）**: 願い石を開発→悪用防止で封印
- **AIリラの暴走事故**: フェンリル（リゼルの召喚獣）が死亡
- **ケンゴの後悔と旅立ち**: 主人公ソウマが父の行方を追う
- **最終対決**: AIリラとの対峙→本編エンド or DLCで救済ルート

### 体験版仕様
- **使用キャラ**: ソウマ、ユズキ、レツジ、カイ
- **初期関係値**: ソウマ-カイ -25 ／ ソウマ-ユズキ,レツジ 高め
- **共闘技**: 2ダンジョン攻略後に解放
- **制限**: 超対立技は体験版では発生不可（上限キャップ設定）

### DLC要素
- リラ・ケンゴ・ピクスの追加参戦
- 研究所ダンジョン追加
- 好感度自由変更（サイトウとの隠しバトル勝利報酬）
- AI救済ルート・エクスパンションパック

### サイトウ（メタキャラ）
- 相関図表示・復帰説明・メタ発言担当
- 教室にのみ存在、他キャラは基本認識できない
- 一部キャラ（リゼル・リラ・ピクス）はうっすら認識

## 技術仕様

### Godot実装アーキテクチャ
- **Scene + Node システム**: Godotの標準設計パターン
- **GDScript**: 高速プロトタイピングと保守性を両立
- **Signal-driven**: 疎結合なイベント通信システム
- **Resource システム**: データ駆動設計の継承

### Unity移行による設計改善
- **MonoBehaviour → Node**: より軽量なコンポーネントシステム
- **ScriptableObject → Resource**: Godot標準のリソース管理
- **Coroutine → await + Tween**: より直感的な非同期処理
- **Canvas → Control**: レスポンシブUI設計

### パフォーマンス特徴
- **軽量エンジン**: Godotによる大幅なメモリ効率化
- **高速起動**: エンジンオーバーヘッドの削減
- **クロスプラットフォーム**: 標準でWindows・Mac・Linux対応
- **バッテリー効率**: モバイル・ハンドヘルド向け最適化

### 開発効率の向上
- **統合エディタ**: Godot Editor内で完結する開発環境
- **インスタントプレビュー**: リアルタイムでの動作確認
- **軽量ビルド**: 高速なイテレーション開発
- **オープンソース**: カスタマイズ・拡張の自由度

## ライセンス

このプロジェクトは**非商用利用限定**でライセンスされています。

### 許可される用途
- **学習・研究**: 個人的な学習とゲーム開発技術研究
- **教育目的**: 教育機関でのプログラミング・ゲーム開発教育
- **技術貢献**: オープンソースへの改善提案とバグ修正
- **学術研究**: 非営利の研究開発とアルゴリズム解析
- **ポートフォリオ**: 学習成果の展示（収益化なし）
- **技術検証**: システム実装の参考とアーキテクチャ研究

### 禁止される商用利用
- ゲームや派生作品の販売
- 広告、スポンサーシップ、寄付による収益化
- Asset Storeでの配布（商用・無料問わず）
- 商用製品・サービスへの統合
- フリーミアム、プレミアム、サブスクリプションモデルでの使用
- 年間売上$10,000を超える企業での使用

### 商用ライセンス
商用利用をご希望の場合は、作者までお問い合わせください。

詳細は [LICENSE](./LICENSE) ファイルをご確認ください。

---

**学習・研究用リポジトリ**: 関係値システムを中心とした革新的なゲームアーキテクチャの技術的実装例を提供します。

> アセット完備版の体験をご希望の方は、完成時の配布をお待ちください。