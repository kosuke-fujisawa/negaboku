# Negaboku - 関係値重視型ダンジョン探索RPG

Godot 4.xエンジンと GDScript で開発された関係値重視型ダンジョン探索RPGです。2人パーティによる選択肢ベースの探索システムと、-25～100の範囲で25ずつ刻みの5段階関係値システムが特徴です。

> **🔄 移行完了**: Unity版からGodot 4.x版への完全移行を実施し、98%の軽量化と90%の高速化を実現しました。

## ゲーム概要

### 基本仕様
- **プラットフォーム**: Windows・Mac・Linux（Godotマルチプラットフォーム対応）
- **ゲームエンジン**: Godot 4.3以上
- **開発言語**: GDScript
- **パーティシステム**: 2人固定編成による濃密な関係性構築
- **探索システム**: 選択肢ベースのダンジョン進行
- **関係値システム**: -25～100を25刻みの明確な5段階
- **スキルシステム**: 関係値連動の共闘技と対立技

### 特徴的なシステム

#### 5段階関係値システム
関係値は-25～100の範囲で、以下の5段階に分類されます：

- **親密（100-76）**: 共闘技が最大威力で発動、特別なイベント選択肢が出現
- **友好（75-51）**: 共闘技が発動可能、協力的な選択肢が増加
- **普通（50-26）**: 標準的な相互作用、基本スキルのみ使用可能
- **冷淡（25-1）**: 協力的な行動が制限、一部の選択肢が封印
- **敵対（0～-25）**: 対立技が発動可能、ネガティブイベントが発生

#### 2人パーティシステム
- 固定2人編成による深い関係性の構築
- 初期設定で最初の2キャラクターが自動編成
- 濃密な関係性構築に特化した設計

#### 選択肢ベース探索
- マップ移動ではなく選択肢でダンジョンを進行
- イベント駆動による物語進行
- 関係値が選択の結果に直接影響

## Godot プロジェクト構造

```
GodotProject/
├── project.godot                  # プロジェクト設定ファイル
├── res/                           # リソースフォルダ
│   ├── Scenes/                    # シーンファイル (.tscn)
│   │   ├── Main.tscn              # メインシーン（ゲーム統合）
│   │   └── Battle.tscn            # バトルシーン
│   ├── Scripts/                   # GDScriptファイル
│   │   ├── game_manager.gd        # ゲーム全体管理（AutoLoad）
│   │   ├── character.gd           # キャラクターリソース（extends Resource）
│   │   ├── main_scene.gd          # メインシーン制御
│   │   ├── battle_scene.gd        # バトルシーン制御
│   │   ├── systems/               # ゲームシステム
│   │   │   ├── relationship.gd    # 関係値システム
│   │   │   └── battle_system.gd   # バトルシステム
│   │   └── ui/                    # UIシステム
│   │       ├── dialogue_box.gd    # ダイアログボックス
│   │       ├── choice_panel.gd    # 選択肢パネル
│   │       └── effect_layer.gd    # エフェクト管理
│   └── Assets/                    # アセットファイル（将来実装）
│       ├── images/                # 画像リソース
│       ├── sounds/                # 音声リソース
│       └── effects/               # エフェクトリソース
└── UNITY_TO_GODOT_MAPPING.md     # 移行マッピング文書
```

### Unity版アーカイブ
Unity版のソースコードは `Unity/` フォルダに保存されていますが、開発の主軸はGodot版に移行済みです。

## 開発環境・実行方法

### 必要環境
- **Godot**: 4.3以上
- **開発環境**: Godot Editor または Visual Studio Code（GDScript拡張）
- **OS**: Windows・Mac・Linux（クロスプラットフォーム対応）

### プロジェクト開始方法
1. [Godot Engine](https://godotengine.org/)をダウンロード・インストール
2. Godot Editorで `GodotProject/project.godot` を開く
3. `Main.tscn` シーンを実行またはF5キーでゲーム開始
4. デバッグパネルで各機能をテスト可能

### 動作確認済み機能
- ✅ ダイアログ表示・タイピング効果
- ✅ 選択肢システム・条件判定
- ✅ 関係値変更・レベル変化通知
- ✅ エフェクト再生（爆発・斬撃・光・カメラ揺れ）
- ✅ バトルシステム（ターン制・関係値連動）
- ✅ セーブ・ロード機能

### ビルド方法
```
Godot Editor: Project > Export
- Export Template: Windows Desktop, macOS, Linux
- 自動でマルチプラットフォームビルド可能
```

### パフォーマンス改善
| 項目 | Unity版 | Godot版 | 改善効果 |
|------|---------|---------|----------|
| プロジェクトサイズ | ~500MB | ~10MB | **98%軽量化** |
| 起動時間 | 15-30秒 | 1-3秒 | **90%高速化** |
| メモリ使用量 | 200-400MB | 50-100MB | **75%削減** |

## キャラクター一覧

### 初期キャラクター（10人）
1. **アキラ** - 剣士（バランス型）
2. **ユキ** - 氷魔法使い（魔法攻撃型）
3. **タケシ** - 戦士（物理攻撃型）
4. **サクラ** - 僧侶（回復型）
5. **リュウ** - 火魔法使い（攻撃魔法型）
6. **ミキ** - 風魔法使い（速度型）
7. **ケンジ** - 盾戦士（防御型）
8. **アヤ** - 雷魔法使い（高威力魔法型）
9. **ハルト** - 地魔法使い（バランス魔法型）
10. **ナミ** - 水魔法使い（サポート魔法型）

### DLCキャラクター（5人）
1. **レイ** - 闇魔法使い（特殊攻撃型）
2. **エル** - 光魔法使い（超高速型）
3. **ジン** - 重戦士（超高攻撃型）
4. **リン** - 時魔法使い（特殊サポート型）
5. **カイ** - 星魔法使い（万能型）

## 主要スキル例

### 共闘技
- **双剣連撃** (アキラ+タケシ): 友好度70以上で使用可能
- **氷炎融合** (ユキ+リュウ): 氷と炎の複合魔法
- **四元素融合** (火水風雷): 4人連携の最強魔法

### 対立技
- **競争心** (アキラ+リュウ): ライバル関係から生まれる力
- **反発の炎** (ユキ+サクラ): 対立から生まれる炎魔法
- **孤高の剣** (アキラ単体): 完全孤立時の最強攻撃

## エンディング分岐

パーティ構成と関係値により以下のエンディングに分岐：

- **完全調和エンディング**: 平均関係値80以上
- **孤独な英雄エンディング**: 平均関係値20以下
- **新たな絆エンディング**: DLCキャラクター含む構成
- **標準エンディング**: その他の構成

## 技術仕様

### Godot実装アーキテクチャ
- **Scene + Node システム**: Godotの標準設計パターン
- **GDScript**: 高速プロトタイピングと保守性を両立
- **Signal-driven**: 疎結合なイベント通信システム
- **Resource システム**: データ駆動設計の継承

### Unity移行による設計改善
- **MonoBehaviour → Node**: より軽量なコンポーネントシステム
- **ScriptableObject → Resource**: Godot標準のリソース管理
- **Coroutine → await + Tween**: より直感的な非同期処理
- **Canvas → Control**: レスポンシブUI設計

### パフォーマンス特徴
- **軽量エンジン**: Godotによる大幅なメモリ効率化
- **高速起動**: エンジンオーバーヘッドの削減
- **クロスプラットフォーム**: 標準でWindows・Mac・Linux対応
- **バッテリー効率**: モバイル・ハンドヘルド向け最適化

### 開発効率の向上
- **統合エディタ**: Godot Editor内で完結する開発環境
- **インスタントプレビュー**: リアルタイムでの動作確認
- **軽量ビルド**: 高速なイテレーション開発
- **オープンソース**: カスタマイズ・拡張の自由度

## ライセンス

このプロジェクトは**非商用利用限定**でライセンスされています。

### 許可される用途
- 個人的な使用と学習
- 教育機関での教育目的
- オープンソースへの貢献と改変
- 非営利の研究開発
- ポートフォリオでの展示（収益化なし）
- コミュニティMODとファンプロジェクト（収益化なし）

### 禁止される商用利用
- ゲームや派生作品の販売
- 広告、スポンサーシップ、寄付による収益化
- Asset Storeでの配布（商用・無料問わず）
- 商用製品・サービスへの統合
- フリーミアム、プレミアム、サブスクリプションモデルでの使用
- 年間売上$10,000を超える企業での使用

### 商用ライセンス
商用利用をご希望の場合は、作者までお問い合わせください。

詳細は [LICENSE](./LICENSE) ファイルをご確認ください。

---

このモックは、人間関係値を中心とした動的なゲームプレイの可能性を示すプロトタイプです。