# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆæ›¸

> **ðŸ”„ Godotç§»è¡Œå®Œäº†**: Unityç‰ˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’Godot 4.xã®Scene + Nodeã‚·ã‚¹ãƒ†ãƒ ã«é©å¿œã—ã€ã‚ˆã‚Šè»½é‡ã§åŠ¹çŽ‡çš„ãªè¨­è¨ˆã«é€²åŒ–ã—ã¾ã—ãŸã€‚

## Godotå®Ÿè£…ã§ã®è¨­è¨ˆæ€æƒ³

### Godoté©å¿œã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **Scene + Node ãƒ‘ã‚¿ãƒ¼ãƒ³**: Godot ã®æ¨™æº–è¨­è¨ˆã«åˆã‚ã›ãŸéšŽå±¤æ§‹é€ 
- **Signal-driven**: ã‚¤ãƒ™ãƒ³ãƒˆé€šä¿¡ã‚’ Godot ã® Signal ã‚·ã‚¹ãƒ†ãƒ ã§å®Ÿè£…
- **Resource ã‚·ã‚¹ãƒ†ãƒ **: ãƒ‡ãƒ¼ã‚¿é§†å‹•è¨­è¨ˆã‚’ Godot ã® Resource ã§å®Ÿç¾
- **è»½é‡æ€§é‡è¦–**: ã‚¨ãƒ³ã‚¸ãƒ³ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’æœ€å°åŒ–ã—ãŸåŠ¹çŽ‡çš„è¨­è¨ˆ

### Unityç§»è¡Œã«ã‚ˆã‚‹æ”¹å–„
- **98%è»½é‡åŒ–**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚µã‚¤ã‚º 500MB â†’ 10MB
- **90%é«˜é€ŸåŒ–**: èµ·å‹•æ™‚é–“ 15-30 ç§’ â†’ 1-3 ç§’
- **75%ãƒ¡ãƒ¢ãƒªå‰Šæ¸›**: ä½¿ç”¨é‡ 200-400MB â†’ 50-100MB
- **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Windowsãƒ»Macãƒ»Linux æ¨™æº–å¯¾å¿œ

## Godotå®Ÿè£…æ§‹æˆ

### ã‚·ã‚¹ãƒ†ãƒ å±¤ï¼ˆ`res/Scripts/systems/`ï¼‰
- **è²¬ä»»**: ã‚²ãƒ¼ãƒ ãƒ­ã‚¸ãƒƒã‚¯ã€é–¢ä¿‚å€¤ãƒ»ãƒãƒˆãƒ«ç®¡ç† âœ…
- **Godotå®Ÿè£…**: class_name + Signal é€šä¿¡
- **å®Ÿè£…æ¸ˆã¿**:
  - `relationship.gd`: é–¢ä¿‚å€¤ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ3 æ®µéšŽç®¡ç†ï¼šå¯¾ç«‹/é€šå¸¸/è¦ªå¯†ï¼‰
  - `battle_system.gd`: ã‚¿ãƒ¼ãƒ³åˆ¶ãƒãƒˆãƒ«ã€AI è¡Œå‹•ã€ã‚¹ã‚­ãƒ«ç™ºå‹•

### ã‚·ãƒ¼ãƒ³ç®¡ç†å±¤ï¼ˆ`res/Scenes/`ï¼‰
- **è²¬ä»»**: ã‚²ãƒ¼ãƒ é€²è¡Œåˆ¶å¾¡ã€UI çµ±åˆ âœ…
- **Godotå®Ÿè£…**: Scene + Node éšŽå±¤è¨­è¨ˆ
- **å®Ÿè£…æ¸ˆã¿**:
  - `Main.tscn`: çµ±åˆãƒ¡ã‚¤ãƒ³ã‚·ãƒ¼ãƒ³ã€ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½
  - `Battle.tscn`: ãƒãƒˆãƒ«å°‚ç”¨ã‚·ãƒ¼ãƒ³ã€UI é€£æº

### UIå±¤ï¼ˆ`res/Scripts/ui/`ï¼‰
- **è²¬ä»»**: è¡¨ç¤ºåˆ¶å¾¡ã€ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å…¥åŠ›å‡¦ç† âœ…
- **Godotå®Ÿè£…**: Control + Signal ã‚¤ãƒ™ãƒ³ãƒˆ
- **å®Ÿè£…æ¸ˆã¿**:
  - `dialogue_box.gd`: ã‚¿ã‚¤ãƒ”ãƒ³ã‚°åŠ¹æžœä»˜ããƒ€ã‚¤ã‚¢ãƒ­ã‚°
  - `choice_panel.gd`: æ¡ä»¶åˆ¤å®šä»˜ãé¸æŠžè‚¢ã‚·ã‚¹ãƒ†ãƒ 
  - `effect_layer.gd`: ãƒ‘ãƒ¼ãƒ†ã‚£ã‚¯ãƒ«ãƒ»ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ãƒ»ã‚«ãƒ¡ãƒ©æºã‚Œ

### ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†å±¤ï¼ˆ`res/Scripts/`ï¼‰
- **è²¬ä»»**: ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€æ°¸ç¶šåŒ– âœ…
- **Godotå®Ÿè£…**: Resource + JSON ã‚»ãƒ¼ãƒ–ã‚·ã‚¹ãƒ†ãƒ 
- **å®Ÿè£…æ¸ˆã¿**:
  - `character.gd`: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãƒªã‚½ãƒ¼ã‚¹ï¼ˆextends Resourceï¼‰
  - `game_manager.gd`: å…¨ä½“çµ±æ‹¬ã€ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½

## ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ æŠ½è±¡åŒ–

### æ¡ä»¶ä»˜ãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- `#if UNITY_STANDALONE_WIN` ã®é©åˆ‡ãªä½¿ç”¨
- ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å›ºæœ‰å‡¦ç†ã®åˆ†é›¢

### ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ
```csharp
public interface IPlatformService
{
    string GetSaveDataPath();
    void ShowNotification(string message);
}

#if UNITY_STANDALONE_WIN
public class WindowsPlatformService : IPlatformService { }
#elif UNITY_STANDALONE_OSX
public class MacPlatformService : IPlatformService { }
#endif
```

### Godotè¨­å®šçµ±ä¸€
- **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: Forward Plusï¼ˆå…¨ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œï¼‰
- **ãƒ“ãƒ«ãƒ‰ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: æ¨™æº–ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§å…¨ OS å¯¾å¿œ
- **å…¥åŠ›ã‚·ã‚¹ãƒ†ãƒ **: Godot æ¨™æº–ã® Inputï¼ˆè‡ªå‹•ã§ãƒ‡ãƒã‚¤ã‚¹å¯¾å¿œï¼‰
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: .tres/.res å½¢å¼ï¼ˆãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éžä¾å­˜ï¼‰

## æ–°ç³»çµ±è©³ç´°ä»•æ§˜

### ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ è©³ç´°

#### ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆåŠ¹æžœãƒ‡ãƒ¼ã‚¿
```gdscript
# res/Scripts/systems/present_system.gd
class_name PresentSystem
extends Node

enum PresentReaction {
    FAVORITE = 10,  # å¥½ç‰©ï¼šç›¸æ‰‹ã®å¥½ã¿ã«ãƒ”ãƒƒã‚¿ãƒªé©åˆ
    NORMAL = 5,     # æ™®é€šï¼šç„¡é›£ãªã‚¢ã‚¤ãƒ†ãƒ é¸æŠž
    DISLIKE = -5    # å«Œã„ï¼šè‡´å‘½å‚·ã«ãªã‚‰ãªã„è»½å¾®ãªãƒšãƒŠãƒ«ãƒ†ã‚£
}

# ã‚­ãƒ£ãƒ©åˆ¥å¥½ã¿ãƒ‡ãƒ¼ã‚¿ï¼ˆåˆå›žãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã§æƒ…å ±é–‹ç¤ºï¼‰
var character_preferences = {
    "yuzuki": {"flowers": PresentReaction.FAVORITE, "books": PresentReaction.NORMAL, "weapons": PresentReaction.DISLIKE},
    "retsuji": {"weapons": PresentReaction.FAVORITE, "food": PresentReaction.NORMAL, "flowers": PresentReaction.DISLIKE}
}
```

### ã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ è©³ç´°

#### æ±Žç”¨ã‚¤ãƒ™ãƒ³ãƒˆç®¡ç†
- **åºç›¤ï½žä¸­ç›¤**: å…±é€šã‚¤ãƒ™ãƒ³ãƒˆå¤šã‚ã€è‡ªç„¶å¤‰å‹•è¨±å®¹ã§ç¨‹ã‚ˆã„é–¢ä¿‚æ€§å¤‰åŒ–
- **å¾ŒåŠãƒ«ãƒ¼ãƒˆç¢ºå®š**: è¦ªå¯†/é€šå¸¸/å¯¾ç«‹ãƒ«ãƒ¼ãƒˆãŒç¢ºå®šå¾Œã«å°‚ç”¨ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ
- **æŽ¨å¥¨ãƒšã‚¢é™å®š**: å°‚ç”¨ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚° CG ã¯æŽ¨å¥¨ãƒšã‚¢ã®ã¿ã«æä¾›

#### è¶…å¯¾ç«‹æŠ€ç™ºå‹•æ¡ä»¶
- **ç‰¹å®šãƒšã‚¢ã®ã¿**: æ‹æ„›çš„å«‰å¦¬ãŒç™ºç”Ÿã™ã‚‹ç‰¹å®šçµ„ã¿åˆã‚ã›
- **æ•°å€¤æ¡ä»¶**: é–¢ä¿‚å€¤-100 é”æˆãŒå¿…é ˆ
- **ãƒªã‚¹ã‚¯è¦ç´ **: é«˜ç«åŠ›ã ãŒé‹ç”¨å›°é›£ãªãƒã‚¤ãƒªã‚¹ã‚¯ã‚¹ã‚­ãƒ«

### ãƒ©ã‚¹ãƒœã‚¹æˆ¦ï¼ˆAIãƒªãƒ©ï¼‰è©³ç´°

#### æˆ¦é—˜ãƒ¡ã‚«ãƒ‹ã‚¯ã‚¹
```gdscript
# res/Scripts/systems/lira_boss_system.gd
class_name LiraBossSystem
extends Node

# åŸºæœ¬ã‚¹ãƒšãƒƒã‚¯è¨­å®š
var lira_stats = {
    "attack_type": "physical_main",  # ç‰©ç†æ”»æ’ƒä¸»ä½“
    "target_type": "single_high",   # å˜ä½“é«˜ç«åŠ›
    "physical_defense": "high",     # é«˜ç‰©ç†è€ä¹…
    "magic_weakness": true          # é­”æ³•æ”»æ’ƒãŒæœ‰åŠ¹
}

# ãƒ•ãƒ«ãƒ‘ãƒ¯ãƒ¼ãƒ¢ãƒ¼ãƒ‰ç®¡ç†
var is_full_power_mode = false
var turn_limit = 10  # ã‚¿ã‚¤ãƒ ãƒªãƒŸãƒƒãƒˆ

func on_hp_half():
    is_full_power_mode = true
    apply_endurance_debuff()  # è€ä¹…ãƒ‡ãƒãƒ•
    enable_high_power_attacks()  # é«˜å¨åŠ›æ”»æ’ƒè§£æ”¾
    start_turn_countdown()  # ã‚¿ã‚¤ãƒ ãƒªãƒŸãƒƒãƒˆé–‹å§‹
```

#### æ–­ç‰‡ã‚¢ã‚¤ãƒ†ãƒ ã‚·ã‚¹ãƒ†ãƒ 
```gdscript
# æ–­ç‰‡åŽé›†ã¨ãƒ‡ãƒãƒ•åŠ¹æžœ
var fragment_count = 0
const REQUIRED_FRAGMENTS = 5

func check_fragments_before_battle() -> bool:
    fragment_count = inventory_system.count_lira_fragments()

    if fragment_count < REQUIRED_FRAGMENTS:
        show_forced_defeat_cutscene()  # å¼·åˆ¶æ•—åŒ—æ¼”å‡º
        return false  # æˆ¦é—˜ä¸å¯

    apply_fragment_debuffs()  # æ–­ç‰‡æ•°ã«å¿œã˜ãŸãƒ‡ãƒãƒ•
    return true  # æˆ¦é—˜é–‹å§‹å¯èƒ½

func apply_fragment_debuffs():
    var debuff_ratio = fragment_count * 0.15  # æ–­ç‰‡ã€1å€‹ã‚ãŸã‚Š15%ãƒ‡ãƒãƒ•
    lira_stats.defense_multiplier *= (1.0 - debuff_ratio)
    lira_stats.attack_multiplier *= (1.0 - debuff_ratio * 0.5)
```

#### æ•‘æ¸ˆã‚·ã‚¹ãƒ†ãƒ 
- **æˆ¦é—˜å‰å†ç·¨æˆ**: ãƒ©ã‚¹ãƒœã‚¹æˆ¦ç›´å‰ã«ãƒšã‚¢å†ç·¨æˆæ©Ÿä¼šã‚’æä¾›
- **ã‚µã‚¤ãƒˆã‚¦ã‚¢ãƒ‰ãƒã‚¤ã‚¹**: å…¨æ»…æ™‚ã«æˆ¦ç•¥çš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›
- **ãƒªãƒˆãƒ©ã‚¤ã‚·ã‚¹ãƒ†ãƒ **: æ­»äº¡æ™‚ã®çŠ¶æ…‹ã‚’ä¿æŒã—ã¦å†æŒ‘æˆ¦å¯èƒ½
- **é›£æ˜“åº¦ãƒãƒ©ãƒ³ã‚¹**: ã‚¯ãƒªã‚¢å¯èƒ½æ€§ã‚’ä¿è¨¼ã—ã¤ã¤æŒ‘æˆ¦çš„ãªé›£æ˜“åº¦ã‚’ç¶­æŒ
